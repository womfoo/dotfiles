prometheus.exporter.self "alloy" {}

prometheus.exporter.unix "node_exporter" { }

prometheus.scrape "scrape" {
	targets    =  prometheus.exporter.unix.node_exporter.targets  
	forward_to = [prometheus.remote_write.metrics_service.receiver]
}

prometheus.remote_write "metrics_service" {
	endpoint {
		url = "https://prometheus-us-central1.grafana.net/api/prom/push"

		basic_auth {
			username = "1509083"
			password = "REDACTED"
		}
	}
}
